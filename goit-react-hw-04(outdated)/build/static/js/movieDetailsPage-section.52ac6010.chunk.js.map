{"version":3,"sources":["helpers/imagesApi.js","views/MovieDetailsPage/MovieDetailsPage.js"],"names":["baseUrl","apiKey","fetchMoviesWithQuery","searchQuery","page","fetch","then","response","json","results","fetchMoviesDetails","movieId","axios","get","data","fetchMoviesCast","cast","fetchMoviesReviews","fetchPopularMovies","AsyncCast","lazy","AsyncReviews","MovieDetailsPage","state","movie","handleGoBack","props","location","from","history","push","routes","home","movieImgUrl","poster_path","this","match","params","setState","className","onClick","type","src","alt","original_title","overview","release_date","vote_average","exact","to","pathname","url","fallback","path","component","Component"],"mappings":"+GAAA,+LAEMA,EAAU,+BAEVC,EAAS,mCAGFC,EAAuB,SAACC,GAA2B,IAAdC,EAAa,uDAAN,EACvD,OAAOC,MAAM,GAAD,OACPL,EADO,iCACyBC,EADzB,kBACyCE,EADzC,iBAC6DC,IAEtEE,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAAD,OAAcA,EAASE,YAGpBC,EAAqB,SAACC,GACjC,OAAOC,IACJC,IADI,UACGb,EADH,kBACoBW,EADpB,oBACuCV,IAC3CK,MAAK,SAACC,GAAD,OAAcA,EAASO,SAGpBC,EAAkB,SAACJ,GAC9B,OAAOC,IACJC,IADI,UACGb,EADH,kBACoBW,EADpB,4BAC+CV,IACnDK,MAAK,SAACC,GAAD,OAAcA,EAASO,KAAKE,SAGzBC,EAAqB,SAACN,GACjC,OAAOC,IACJC,IADI,UAEAb,EAFA,kBAEiBW,EAFjB,4BAE4CV,EAF5C,2BAIJK,MAAK,SAACC,GAAD,OAAcA,EAASO,KAAKL,YAGzBS,EAAqB,WAChC,OAAOb,MAAM,GAAD,OAAIL,EAAJ,uCAA0CC,IACnDK,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAAD,OAAcA,EAASE,a,qLChC3BU,G,MAAYC,gBAAK,kBACrB,iCAEIC,EAAeD,gBAAK,kBACxB,gCAGmBE,E,4MACnBC,MAAQ,CACNC,MAAO,M,EASTC,aAAe,WAAO,IACZF,EAAU,EAAKG,MAAMC,SAArBJ,MAER,GAAIA,GAASA,EAAMK,KACjB,OAAO,EAAKF,MAAMG,QAAQC,KAAKP,EAAMK,MAOvC,EAAKF,MAAMG,QAAQC,KAAKC,IAAOC,O,EAGjCC,YAAc,0DACsB,EAAKV,MAAMC,MAAMU,c,kEArBhC,IAAD,OAClBxB,YAAmByB,KAAKT,MAAMU,MAAMC,OAAO1B,SAASL,MAAK,SAACkB,GAAD,OACvD,EAAKc,SAAS,CAAEd,e,+BAqBV,IACAA,EAAUW,KAAKZ,MAAfC,MACAY,EAAUD,KAAKT,MAAfU,MAER,OACE,6BACE,oEACA,4BAAQG,UAAW,SAAUC,QAASL,KAAKV,aAAcgB,KAAK,UAA9D,gBAGA,6BACCjB,GACC,yBAAKe,UAAW,aACd,yBACEA,UAAW,kBACXG,IAAG,UAAKP,KAAKF,eACbU,IAAKnB,EAAMoB,iBAEb,yBAAKL,UAAW,QACd,wBAAIA,UAAW,SAAUf,EAAMoB,gBAC/B,wBAAIL,UAAW,YAAf,YACA,uBAAGA,UAAW,iBAAkBf,EAAMqB,UACtC,wBAAIN,UAAW,SAAf,gBACA,uBAAGA,UAAW,cAAef,EAAMsB,cACnC,wBAAIP,UAAW,WAAf,UACA,uBAAGA,UAAW,gBAAiBf,EAAMuB,eAEvC,wBAAIR,UAAW,YACb,wBAAIA,UAAW,YACb,kBAAC,IAAD,CACEA,UAAW,SACXS,OAAK,EACLC,GAAI,CACFC,SAAS,GAAD,OAAKd,EAAMe,IAAX,SACR5B,MAAO,CAAEK,KAAMO,KAAKT,MAAMC,YAL9B,SAWF,wBAAIY,UAAW,YACb,kBAAC,IAAD,CACEA,UAAW,SACXU,GAAI,CACFC,SAAS,GAAD,OAAKd,EAAMe,IAAX,YACR5B,MAAO,CAAEK,KAAMO,KAAKT,MAAMC,YAJ9B,cAaR,kBAAC,WAAD,CAAUyB,SAAU,2CAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAI,UAAKjB,EAAMiB,KAAX,SAAwBC,UAAWnC,IAC9C,kBAAC,IAAD,CAAOkC,KAAI,UAAKjB,EAAMiB,KAAX,YAA2BC,UAAWjC,W,GArFfkC","file":"static/js/movieDetailsPage-section.52ac6010.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://api.themoviedb.org/3\";\r\n\r\nconst apiKey = \"74deffb283af53f0c578a6d4e99eab77\";\r\n// `${baseUrl}/search/movie?api_key=${apiKey}&query=${searchQuery}&page=${page}`\r\n// results.map((result) => result.original_title));\r\nexport const fetchMoviesWithQuery = (searchQuery, page = 1) => {\r\n  return fetch(\r\n    `${baseUrl}/search/movie?api_key=${apiKey}&query=${searchQuery}&page=${page}`\r\n  )\r\n    .then((response) => response.json())\r\n    .then((response) => response.results);\r\n};\r\n\r\nexport const fetchMoviesDetails = (movieId) => {\r\n  return axios\r\n    .get(`${baseUrl}/movie/${movieId}?api_key=${apiKey}`)\r\n    .then((response) => response.data);\r\n};\r\n\r\nexport const fetchMoviesCast = (movieId) => {\r\n  return axios\r\n    .get(`${baseUrl}/movie/${movieId}/credits?api_key=${apiKey}`)\r\n    .then((response) => response.data.cast);\r\n};\r\n\r\nexport const fetchMoviesReviews = (movieId) => {\r\n  return axios\r\n    .get(\r\n      `${baseUrl}/movie/${movieId}/reviews?api_key=${apiKey}&language=en-US&page=1`\r\n    )\r\n    .then((response) => response.data.results);\r\n};\r\n\r\nexport const fetchPopularMovies = () => {\r\n  return fetch(`${baseUrl}/trending/movie/day?api_key=${apiKey}`)\r\n    .then((response) => response.json())\r\n    .then((response) => response.results);\r\n};\r\n\r\n","import React, { Component, lazy, Suspense } from \"react\";\r\nimport { Route, Switch, NavLink } from \"react-router-dom\";\r\nimport { fetchMoviesDetails } from \"../../helpers/imagesApi\";\r\nimport routes from \"../../routes\";\r\nimport \"./MovieDetailsPage.css\";\r\n\r\nconst AsyncCast = lazy(() =>\r\n  import(\"../Cast\" /* webpackChunkName: \"cast-section\" */)\r\n);\r\nconst AsyncReviews = lazy(() =>\r\n  import(\"../Reviews\" /* webpackChunkName: \"review-section\" */)\r\n);\r\n\r\nexport default class MovieDetailsPage extends Component {\r\n  state = {\r\n    movie: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetchMoviesDetails(this.props.match.params.movieId).then((movie) =>\r\n      this.setState({ movie })\r\n    );\r\n  }\r\n\r\n  handleGoBack = () => {\r\n    const { state } = this.props.location;\r\n\r\n    if (state && state.from) {\r\n      return this.props.history.push(state.from);\r\n    }\r\n\r\n    // if (state.from.pathname === \"путь на отрисованный фильм\") {\r\n    //   return this.props.history.push({pathname:\"/movies\", search:\"последний запрос\"});\r\n    // }\r\n\r\n    this.props.history.push(routes.home);\r\n  };\r\n\r\n  movieImgUrl = () =>\r\n    `https://image.tmdb.org/t/p/w400${this.state.movie.poster_path}`;\r\n\r\n  render() {\r\n    const { movie } = this.state;\r\n    const { match } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <p>Welcome on MovieDetailsPage component</p>\r\n        <button className={\"Button\"} onClick={this.handleGoBack} type=\"button\">\r\n          Back to list\r\n        </button>\r\n        <hr></hr>\r\n        {movie && (\r\n          <div className={\"Container\"}>\r\n            <img\r\n              className={\"ImageItem-image\"}\r\n              src={`${this.movieImgUrl()}`}\r\n              alt={movie.original_title}\r\n            />\r\n            <div className={\"Info\"}>\r\n              <h1 className={\"Title\"}>{movie.original_title}</h1>\r\n              <h2 className={\"Overview\"}>Overview</h2>\r\n              <p className={\"Overview-item\"}>{movie.overview}</p>\r\n              <h2 className={\"Date \"}>Release date</h2>\r\n              <p className={\"Date-item \"}>{movie.release_date}</p>\r\n              <h2 className={\"Rating \"}>Rating</h2>\r\n              <p className={\"Rating-item \"}>{movie.vote_average}</p>\r\n            </div>\r\n            <ul className={\"Nav-list\"}>\r\n              <li className={\"Nav-item\"}>\r\n                <NavLink\r\n                  className={\"Button\"}\r\n                  exact\r\n                  to={{\r\n                    pathname: `${match.url}/cast`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  Cast\r\n                </NavLink>\r\n              </li>\r\n              <li className={\"Nav-item\"}>\r\n                <NavLink\r\n                  className={\"Button\"}\r\n                  to={{\r\n                    pathname: `${match.url}/reviews`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  Reviews\r\n                </NavLink>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n        <Suspense fallback={<h2>Loading...</h2>}>\r\n          <Switch>\r\n            <Route path={`${match.path}/cast`} component={AsyncCast} />\r\n            <Route path={`${match.path}/reviews`} component={AsyncReviews} />\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}